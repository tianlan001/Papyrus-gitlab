= Element Types Configurations for UML Profiles =

For detailed information about the Element Types framework of GMF/Papyrus, see the Toolsmiths/ElementTypeConfigurationsFramework section.

This section focuses on how Element Types Configurations models can be generated from a Profile, as well as maintained when the Profile evolves.

== The Element Types Configurations model for UML Profiles ==

The Element Types model generated from a UML Profile contains one SpecializationTypeConfiguration per Stereotype Extension, extending the UML Metamodel Type corresponding to the extended UML Metaclass. Each Specialization Type contains a Stereotype Matcher to identify the existing Stereotyped Elements, and an Advice to automatically apply the Stereotype on creation. Further customization (Such as setting some values during the creation of the Stereotyped Element, or attaching custom Advices) must be done manually.

== Generating the Model ==

The Element Types Configurations model can be generated by opening the profile in the Papyrus editor. From the Model Explorer view, right click on the Profile, and select Generate Tooling Model > Element Types...

[[image:images/Generate.png]]

This opens the Model Generation wizard:

[[image:images/Generate_Wizard.png]]

In this wizard, you can select:

* The Identifier: used to prefix all identifiers in the Types model
* Base element types set: the element types to extend. For a Profile, this is typically the UMLElementTypeSet from the org.eclipse.papyrus.uml.service.types plug-in, which contains all the default types for UML. You may also choose the UMLDIElementTypeSet to generate specialized types for all visual (diagram) elements. This guide focuses on the default value, which is UMLElementTypeSet.
* Parent folder: Where the Element Types Configurations Model will be generated. It is recommended to select a folder inside of an Eclipse plug-in Project. In that case, the Generator will also configure the plug-in, to define e.g. all required plug-in dependencies, extension points, etc. 
* File name: the file name for the generated model. The default value is usually a good choice.
* Generate extension point: If the selected folder is part of an Eclipse plug-in Project, indicate if the element types configurations extension point should be created. This is necessary when contributing new Element Types to an existing language (e.g. the default Papyrus UML Language). However, if you intend to deploy the Element Types Configurations in a Domain-specific Architecture Model, this extension point is optional. If the selected folder is not part of an Eclipse plug-in Project, the "Plug-in Configuration" section will be disabled (And no extension point will be generated).

The options related to the incremental generation will be discussed in the next section.

When pressing finish, the model will be generated at the selected location, and will contain one Specialization Type Configuration for each Stereotype Extension:

[[image:images/GeneratedModel.png]]

== Incremental Generation ==

Since the generated model only contains the simple structure for your Profile Types (Which may or may not be sufficient), it is often required to add custom Advices to the generated Specialization Types. If the profile evolves (Usually with new Stereotypes), the generator can be used to update an existing Element Types Configurations to include the Specialization Types related to these new Stereotypes, without affecting the existing Types. This way, the user changes will be preserved.

Incremental Generation is the default behavior when generating the Element Types and selecting a target Folder/Model that already exists:

[[image:images/Generate_Wizard_Incremental.png]]

Otherwise, if the target file doesn't exist, this section will be disabled.

The following profile changes will be considered by the incremental generator:

* New Stereotype or Extension: A new Specialization Type Configuration will be generated for each new Stereotype Extension (Either a new Stereotype with some Extensions, or an existing Stereotype with new Extensions).
* Removed Stereotype or Extension: All Specialization Type Configurations generated from a Stereotype or an Extension that has been deleted will be removed from the model, if "Removed Deleted Types" is selected. Uncheck this option if you wish to preserve the Specialization Types (Note that the resulting model will then be invalid, and will need to be fixed manually. This may be a safer choice if you made heavy customizations to the generated model; but is not recommended otherwise).
* Renamed Stereotype: Existing Specialization Types corresponding to Stereotypes that have been renamed will be updated to use the new (qualified) name. This includes Stereotype Matcher, Apply Stereotype Advices, Specialization Type ID and Name. Custom advices will not be modified. Renamed Stereotypes are identified based on their URI, as defined in the generated Specialization Type Configuration 'Source' attribute.

If the incremental generation is turned off, the existing model (if any) will be overwritten.
